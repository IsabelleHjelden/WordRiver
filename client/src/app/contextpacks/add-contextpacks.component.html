<div fxLayout="row">
  <div fxFlex fxFlex.gt-sm="80" fxFlexOffset.gt-sm="10">
<form [formGroup]="contextPackForm" (ngSubmit)="submitForm()">
  <mat-card class="add-contextpack-card">
    <mat-card-content fxLayout="column">

    <mat-form-field>
      <mat-label>Pack Name</mat-label>
      <input matInput placeholder="Name" formControlName="name"
            required>
      <mat-error *ngFor="let validation of validationMessages.wordlists.name">
        <mat-error class="error-message" data-test="nameError"
                  *ngIf="contextPackForm.get('name').hasError(validation.type) && (contextPackForm.get('name').dirty || contextPackForm.get('name').touched)">
          {{validation.message}}
        </mat-error>
      </mat-error>
    </mat-form-field>

  <mat-form-field>
    <mat-label>Enabled</mat-label>
    <mat-select required formControlName="enabled">
      <mat-option value="true">True</mat-option>
      <mat-option value="false">False</mat-option>
    </mat-select>
    <mat-error *ngIf="contextPackForm.get('enabled').hasError('required')">You must make a selection</mat-error>
    <mat-error *ngIf="contextPackForm.get('enabled').hasError('pattern') && !contextPackForm.get('enabled').hasError('required')">
      Your selection is invalid
    </mat-error>
  </mat-form-field>

  <mat-form-field>
    <mat-label>Icon (optional)</mat-label>
    <input matInput placeholder="Icon" formControlName="name" Optional>
  </mat-form-field>

	<!-- X -->
	<div formArrayName="wordlists">
		<div *ngFor="let wordlists of contextPackForm['controls'].wordlists['controls']; let ix=index">
			<div formGroupName="{{ix}}" class="wordlists" style="border: 1px solid blue; padding: 10px; width: 600px; margin: 5px;">
        <button type="button" (click)="removeWordlists(ix)">Remove This Wordlist</button><br>
        <label>
          Wordlist Name:
          <input type="text" formControlName="name">
        </label>
        <label>
          Enabled:
          <input type="text" formControlName="enabled">
        </label>


				<!-- Nouns -->
        <label>
          <div formArrayName="nouns">
           <h3>Nouns</h3>
            <div *ngFor="let nouns of wordlists['controls'].nouns['controls']; let iy=index">
              <div formGroupName="{{iy}}" class="nouns">
                <button type="button" (click)="removeWord(ix, iy, 'nouns')">Remove Noun</button>
                <label>
                  Word:
                  <input type="text" formControlName="word">
                </label>
                <div formArrayName="forms">
                  <div *ngFor="let forms of nouns['controls'].forms['controls']; let iz=index">
                    <!-- The repeated form template -->
                    Form:
                    <input type="text" [formControlName]="iz">
                    <button type="button" (click)="removeForm(ix, iy, iz, 'nouns')">Remove Form</button>

                  </div>
                </div>
                <button type="button" (click)="addForms(ix, iy, 'nouns')">Add Form</button>

              </div>
            </div>
            <button type="button" (click)="addPosArray(ix,'nouns')" value="Add Noun">Add Noun</button>
          </div>

        </label>
				<!-- Nouns End -->
        <!-- Adjectives -->
        <label>
          <div formArrayName="adjectives">
           <h3>Adjectives</h3>
            <div *ngFor="let nouns of wordlists['controls'].adjectives['controls']; let iy=index">
              <div formGroupName="{{iy}}" class="adjectives">
                <button type="button" (click)="removeWord(ix, iy, 'adjectives')">Remove Adjective</button>

                <label>
                  Word:
                  <input type="text" formControlName="word">
                </label>
                <div formArrayName="forms">
                  <div *ngFor="let forms of nouns['controls'].forms['controls']; let iz=index">
                    <!-- The repeated form template -->
                    Form:
                    <input type="text" [formControlName]="iz">
                    <button type="button" (click)="removeForm(ix, iy, iz, 'adjectives')">Remove Form</button>

                  </div>
                </div>
                <button type="button" (click)="addForms(ix, iy, 'adjectives')">Add Form</button>

              </div>
            </div>
            <button type="button" (click)="addPosArray(ix,'adjectives')" value="Add Adjective">Add Adjective</button>
          </div>

        </label>
				<!-- Adjectives End -->
        <!-- Verbs -->
        <label>
          <div formArrayName="verbs">
           <h3>Verbs</h3>
            <div *ngFor="let nouns of wordlists['controls'].verbs['controls']; let iy=index">
              <div formGroupName="{{iy}}" class="verbs">
                <button type="button" (click)="removeWord(ix, iy, 'verbs')">Remove Verb</button>

                <label>
                  Word:
                  <input type="text" formControlName="word">
                </label>
                <div formArrayName="forms">
                  <div *ngFor="let forms of nouns['controls'].forms['controls']; let iz=index">
                    <!-- The repeated form template -->
                    Form:
                    <input type="text" [formControlName]="iz">
                    <button type="button" (click)="removeForm(ix, iy, iz, 'verbs')">Remove Form</button>

                  </div>
                </div>
                <button type="button" (click)="addForms(ix, iy, 'verbs')">Add Form</button>

              </div>
            </div>
            <button type="button" (click)="addPosArray(ix,'verbs')" value="Add Verb">Add Verb</button>
          </div>

        </label>
				<!-- Verbs End -->
        <!-- Misc -->
        <label>
          <div formArrayName="misc">
           <h3>Misc</h3>
            <div *ngFor="let nouns of wordlists['controls'].misc['controls']; let iy=index">
              <div formGroupName="{{iy}}" class="misc">
                <button type="button" (click)="removeWord(ix, iy, 'misc')">Remove Misc</button>

                <label>
                  Word:
                  <input type="text" formControlName="word">
                </label>
                <div formArrayName="forms">
                  <div *ngFor="let forms of nouns['controls'].forms['controls']; let iz=index">
                    <!-- The repeated form template -->
                    Forms:
                    <input type="text" [formControlName]="iz">
                    <button type="button" (click)="removeForm(ix, iy, iz, 'misc')">Remove Form</button>

                  </div>
                </div>
                <button type="button" (click)="addForms(ix, iy,'misc')">Add Form</button>

              </div>
            </div>
            <button type="button" (click)="addPosArray(ix,'misc')" value="Add Misc"> Add A Misc Word</button>
          </div>

        </label>
				<!-- Misc End -->

			</div>
		</div>
		<button type="button" (click)="addWordlist()" value="Add Wordlist">Add Wordlist</button>
	</div>
</mat-card-content>
</mat-card>
	<!-- X End -->
	<form>
      <button type="submit" (click)="submitForm()"
        mat-button
        type="button"
        color="primary"
        [disabled]="!contextPackForm.valid"
        type="submit"
        data-test="confirmAddPackButton"
      >
        ADD CONTEXT PACK
      </button>

		<h5>Field Values</h5>
    <button class="contextpack-download-button" (click)='contextpackcard.downloadJson(contextPackForm.value , contextPackForm.value.name, 1)'>Download Json</button>
		<pre style="font-size:15px">{{ contextPackForm.value | json }}</pre>

